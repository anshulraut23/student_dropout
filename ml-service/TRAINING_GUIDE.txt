ML MODEL TRAINING GUIDE
=======================

QUICK START
-----------
1. cd ml-service
2. python -m venv venv
3. venv\Scripts\activate (Windows) or source venv/bin/activate (Mac/Linux)
4. pip install -r requirements.txt
5. python generate_and_train.py
6. python app.py

WHAT HAPPENS DURING TRAINING
-----------------------------
The generate_and_train.py script:

1. Generates 1,000 synthetic student records with realistic correlations:
   - Low attendance + low marks = high dropout risk
   - Good attendance + good marks = low dropout risk
   - Behavior issues amplify other risk factors

2. Trains a Random Forest Classifier:
   - 100 decision trees
   - Balanced class weights (handles imbalanced data)
   - 80/20 train/test split

3. Evaluates the model:
   - Classification report (precision, recall, F1-score)
   - Confusion matrix
   - ROC-AUC score (typically 0.85+)

4. Saves outputs:
   - models/dropout_model.pkl (trained model)
   - models/training_data.csv (synthetic data)
   - models/model_metadata.json (model info)

FEATURE IMPORTANCE
------------------
After training, you'll see which features matter most:

Example output:
  attendance_rate         0.2845  (28.45% importance)
  avg_marks_percentage    0.2612  (26.12% importance)
  behavior_score          0.1523  (15.23% importance)
  days_tracked            0.0892  (8.92% importance)
  ...

These scores tell you:
- Which factors most influence dropout predictions
- What to focus on for interventions
- How the ML model makes decisions

CONTINUOUS LEARNING
-------------------
To retrain with real data:

1. Collect historical student data with outcomes
2. Format as JSON with 'dropped_out' field (0 or 1)
3. POST to /retrain endpoint with 50+ samples
4. Model automatically retrains and reloads

Example:
  curl -X POST http://localhost:5001/retrain \
    -H "Content-Type: application/json" \
    -d '{"training_data": [...]}'

UNDERSTANDING THE MODEL
-----------------------
Random Forest works by:
1. Creating 100 decision trees
2. Each tree votes on dropout risk
3. Final prediction = average of all votes
4. More trees voting "dropout" = higher risk score

Risk Score Interpretation:
- 0.0-0.3 = Low risk (0-30% dropout probability)
- 0.3-0.6 = Medium risk (30-60% dropout probability)
- 0.6-0.8 = High risk (60-80% dropout probability)
- 0.8-1.0 = Critical risk (80-100% dropout probability)

TROUBLESHOOTING
---------------
Q: Training fails with "module not found"
A: Run: pip install -r requirements.txt

Q: Model file not found when starting server
A: Run: python generate_and_train.py first

Q: Low accuracy on real data
A: Retrain with real historical data using /retrain endpoint

Q: Feature importance doesn't match expectations
A: This is normal - ML discovers patterns in data that may differ from assumptions

NEXT STEPS
----------
1. Train initial model: python generate_and_train.py
2. Start service: python app.py
3. Test predictions: python test_ml_service.py
4. Integrate with Node.js backend
5. Collect real data and retrain periodically
